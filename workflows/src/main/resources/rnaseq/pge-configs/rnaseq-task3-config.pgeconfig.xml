<?xml version="1.0" encoding="UTF-8"?>
<pgeConfig>

    <customMetadata>
      <metadata key="ProductionDateTime" val="[DATE.UTC]" />
      <metadata key="JobDir" val="[PGE_ROOT]/rnaseq/jobs/[DatasetId]" />
    </customMetadata>

	<!-- PGE commands -->
    <exe dir="[JobDir]" shell="/bin/bash">
      <cmd>cd [JobDir]/thout</cmd>
      <cmd>export PATH=[PATH]:[PGE_ROOT]/rnaseq</cmd>
      <cmd>htseq-count -r name sorted.sam ../genes.gtf  > [DatasetId].gene.counts</cmd>
    </exe>


	<!-- CAS Crawler directives -->
	<output>
		<dir path="[JobDir]/thout" createBeforeExe="false">
			<!-- metadata extractors matching specific files -->
			<files regExp=".*\.counts"
				metFileWriterClass="org.apache.oodt.cas.pge.writers.metlist.MetadataListPcsMetFileWriter"
				args="[LABCAS_HOME]/workflows/rnaseq-pipeline/pge-configs/metout.xml" />
		</dir>
        <dir path="[JobDir]" createBeforeExe="false">
          <files regExp=".*\.fastq"
            metFileWriterClass="org.apache.oodt.cas.pge.writers.metlist.MetadataListPcsMetFileWriter"
            args="[LABCAS_HOME]/workflows/rnaseq-pipeline/pge-configs/metin.xml" />
        </dir>
  </output>

</pgeConfig>