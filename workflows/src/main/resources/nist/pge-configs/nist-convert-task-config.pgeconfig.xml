<?xml version="1.0" encoding="UTF-8"?>
<pgeConfig>

  <!-- PGE commands -->
  <exe dir="[JobDir]" shell="/bin/bash">
    <cmd>cd [LABCAS_HOME]/workflows/nist/pges</cmd>
    <cmd>mkdir -p [PGE_ROOT]/[mirnadatadir]</cmd>
    <cmd>cp -R [LABCAS_STAGING]/[mirnadatadir]/* [PGE_ROOT]/[mirnadatadir]/.</cmd>
    <cmd>python nist-converter.py [PGE_ROOT]/[mirnadatadir] --pi [pi] --instrument [instrument] --lab [lab] --date [date]</cmd>
  </exe>

  <customMetadata>
    <metadata key="ProductionDateTime" val="[DATE.UTC]" />
    <metadata key="JobDir" val="[PGE_ROOT]/nist/jobs/job-[ProductionDateTime]" />
  </customMetadata>

  <!-- CAS Crawler directives -->
  <output>
    <dir path="[PGE_ROOT]/[mirnadatadir]" createBeforeExe="false">
      <!-- metadata extractors matching specific files -->
      <files regExp=".*\.txt" metFileWriterClass="org.apache.oodt.cas.pge.writers.metlist.MetadataListPcsMetFileWriter" args="[LABCAS_HOME]/workflows/nist/pge-configs/metout.xml" />
      <files regExp=".*\.nist" metFileWriterClass="org.apache.oodt.cas.pge.writers.metlist.MetadataListPcsMetFileWriter" args="[LABCAS_HOME]/workflows/nist/pge-configs/metout.xml" />
    </dir>
  </output>

</pgeConfig>